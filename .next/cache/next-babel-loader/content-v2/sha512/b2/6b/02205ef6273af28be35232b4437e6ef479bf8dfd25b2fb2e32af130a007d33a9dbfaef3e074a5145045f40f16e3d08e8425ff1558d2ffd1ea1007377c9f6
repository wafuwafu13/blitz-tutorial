{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { AuthenticationError, Link, useMutation } from \"blitz\";\nimport { LabeledTextField } from \"app/components/LabeledTextField\";\nimport { Form, FORM_ERROR } from \"app/components/Form\";\nimport login from \"app/auth/mutations/login\";\nimport { LoginInput } from \"app/auth/validations\";\nexport var LoginForm = function LoginForm(props) {\n  var _useMutation = useMutation(login),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      loginMutation = _useMutation2[0];\n\n  return __jsx(\"div\", null, __jsx(\"h1\", null, \"Login\"), __jsx(Form, {\n    submitText: \"Login\",\n    schema: LoginInput,\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    onSubmit: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var _props$onSuccess;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return loginMutation(values);\n\n              case 3:\n                (_props$onSuccess = props.onSuccess) === null || _props$onSuccess === void 0 ? void 0 : _props$onSuccess.call(props);\n                _context.next = 13;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!(_context.t0 instanceof AuthenticationError)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, \"Sorry, those credentials are invalid\"));\n\n              case 12:\n                return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, \"Sorry, we had an unexpected error. Please try again. - \" + _context.t0.toString()));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  }, __jsx(LabeledTextField, {\n    name: \"email\",\n    label: \"Email\",\n    placeholder: \"Email\"\n  }), __jsx(LabeledTextField, {\n    name: \"password\",\n    label: \"Password\",\n    placeholder: \"Password\",\n    type: \"password\"\n  })), __jsx(\"div\", {\n    style: {\n      marginTop: \"1rem\"\n    }\n  }, \"Or \", __jsx(Link, {\n    href: \"/signup\"\n  }, \"Sign Up\")));\n};\nexport default LoginForm;","map":null,"metadata":{},"sourceType":"module"}