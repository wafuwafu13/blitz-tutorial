{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { ErrorComponent, useRouter, AuthenticationError, AuthorizationError } from \"blitz\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { queryCache } from \"react-query\";\nimport LoginForm from \"app/auth/components/LoginForm\";\nexport default function App(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n\n  var getLayout = Component.getLayout || function (page) {\n    return page;\n  };\n\n  var router = useRouter();\n  return __jsx(ErrorBoundary, {\n    FallbackComponent: RootErrorFallback,\n    resetKeys: [router.asPath],\n    onReset: function onReset() {\n      // This ensures the Blitz useQuery hooks will automatically refetch\n      // data any time you reset the error boundary\n      queryCache.resetErrorBoundaries();\n    }\n  }, getLayout(__jsx(Component, pageProps)));\n}\n\nfunction RootErrorFallback(_ref2) {\n  var error = _ref2.error,\n      resetErrorBoundary = _ref2.resetErrorBoundary;\n\n  if (error instanceof AuthenticationError) {\n    return __jsx(LoginForm, {\n      onSuccess: resetErrorBoundary\n    });\n  } else if (error instanceof AuthorizationError) {\n    return __jsx(ErrorComponent, {\n      statusCode: error.statusCode,\n      title: \"Sorry, you are not authorized to access this\"\n    });\n  } else {\n    return __jsx(ErrorComponent, {\n      statusCode: (error === null || error === void 0 ? void 0 : error.statusCode) || 400,\n      title: (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.name)\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}