{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useMutation } from \"blitz\";\nimport { LabeledTextField } from \"app/components/LabeledTextField\";\nimport { Form, FORM_ERROR } from \"app/components/Form\";\nimport signup from \"app/auth/mutations/signup\";\nimport { SignupInput } from \"app/auth/validations\";\nexport var SignupForm = function SignupForm(props) {\n  var _useMutation = useMutation(signup),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      signupMutation = _useMutation2[0];\n\n  return __jsx(\"div\", null, __jsx(\"h1\", null, \"Create an Account\"), __jsx(Form, {\n    submitText: \"Create Account\",\n    schema: SignupInput,\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    onSubmit: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var _props$onSuccess, _error$meta, _error$meta$target;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return signupMutation(values);\n\n              case 3:\n                (_props$onSuccess = props.onSuccess) === null || _props$onSuccess === void 0 ? void 0 : _props$onSuccess.call(props);\n                _context.next = 13;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!(_context.t0.code === \"P2002\" && (_error$meta = _context.t0.meta) !== null && _error$meta !== void 0 && (_error$meta$target = _error$meta.target) !== null && _error$meta$target !== void 0 && _error$meta$target.includes(\"email\"))) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  email: \"This email is already being used\"\n                });\n\n              case 12:\n                return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, _context.t0.toString()));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  }, __jsx(LabeledTextField, {\n    name: \"email\",\n    label: \"Email\",\n    placeholder: \"Email\"\n  }), __jsx(LabeledTextField, {\n    name: \"password\",\n    label: \"Password\",\n    placeholder: \"Password\",\n    type: \"password\"\n  })));\n};\nexport default SignupForm;","map":null,"metadata":{},"sourceType":"module"}